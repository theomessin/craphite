language: typescript

tasks:
  codegen:
    command: "graphql-codegen"
    inputs:
      - "src/schema/**/*"
      - "codegen.ts"
      - "tsconfig.ts"

  typecheck:
    deps:
      - codegen
    command: "tsc"
    inputs:
      - "src/**/*"
      - "tsconfig.json"
    outputs:

  format:
    command: "prettier --write ."
    inputs:
      - "**/*"
    outputs:
      - "**/*"

  dev:
    command: "node -r @swc-node/register --watch src/server.ts"
    local: true
